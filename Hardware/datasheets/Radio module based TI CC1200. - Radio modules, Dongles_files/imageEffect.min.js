!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("__JZ_UMD__",[],t):"object"==typeof exports?exports.__JZ_UMD__=t():(e.__JZ_UMD__=e.__JZ_UMD__||{},e.__JZ_UMD__["libs/imageEffect"]=t())}("undefined"!=typeof window?window:global,(function(){return function(){var e;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,i,o){return(i=function(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,i||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==t(i)?i:i+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}return Site.ImageEffect=Site.ImageEffect?Site.ImageEffect:{},jQuery,(e=Site.ImageEffect).DATA={},e.DATA.imageEffectHtml="<div class='imageEffects imageEffectsAnimate'></div>",e.DATA.KEY={OPT_MODULE_ID:"moduleId",OPT_IMG_EFF_OPTION:"imgEffOption",OPT_TG_OPTION:"tagetOption",OPT_CALLBACK:"callback",OPT_CALLBACK_ARGS:"callbackArgs",FULL_MASK_BG_STYLE:"fmbgs",FULL_MASK_NAME_STYLE:"fmns",FULL_MASK_NAME_ALIG:"fmna",FULL_MASK_DISC_STYLE:"fmds",FULL_MASK_DISC_ALIG:"fmda",FULL_MASK_CUS_BG:"fullMaskCusBg",FULL_MASK_CUS_NAME:"fullMaskCusName",FULL_MASK_CUS_DISC:"fullMaskCusDisc",FULL_MASK_OPEN_DISC:"fullMaskOpenDisc",HALF_MASK_BG_STYLE:"hmbgs",HALF_MASK_DISC_STYLE:"hmds",HALF_MASK_DISC_ALIG:"hmda",HALF_MASK_CUS_BG:"halfMaskCusBg",HALF_MASK_CUS_DISC:"halfMaskCusDisc",HALF_MASK_OPEN_DISC:"halfMaskOpenDisc",ALIG:{CENTER:1,LEFT:2,RIGHT:3}},e.FUNC={BASIC:{},BUS:{},TOOL:{}},e.ITF={cardTd:Site.bindImageEffectCusEvent_photo,moreCardTd:Site.bindImageEffectCusEvent_photo,"photo-container":Site.bindImageEffectCusEvent_photo,photoForm:Site.bindImageEffectCusEvent_photo,photoMarqueeForm:Site.bindImageEffectCusEvent_photo,photoSmallPic_table:Site.bindImageEffectCusEvent_photo,J_list_photos_masonry_item:Site.bindImageEffectCusEvent_photo,J_list_photos_accordion_item:Site.bindImageEffectCusEvent_photo,productTileForm:Site.bindImageEffectCusEvent_product,productMarqueeForm:Site.bindImageEffectCusEvent_product,"product-container":Site.bindImageEffectCusEvent_product,productDoublePicListForm:Site.bindImageEffectCusEvent_product,containerLeft:Site.bindImageEffectCusEvent_product,productHotTextListHot:Site.bindImageEffectCusEvent_product,productPicListForm:Site.bindImageEffectCusEvent_product,floatImg_J:Site.bindImageEffectCusEvent_floatImg},function(e,t){t.FUNC.TOOL.resetImgEff=function(i,o,a,n){var s=i.targetParent,r=e(o).find("img");0==r.length&&(r=e(o).find(".J_fonticon"));var f=e(r).position().top,c=e(r).position().left,_=e(r).width(),p=e(r).height(),l=e(r).css("margin-left"),T=e(a).css("border-left-width"),m=i.paramLayoutType||0,g=i.picScale||0,O=e(o).position().top,d=e(o).parent().css("padding-top").replace("px",""),E=i.moduleStyle||-1;l=t.FUNC.TOOL.parsePixelToInt(l),T=t.FUNC.TOOL.parsePixelToInt(T),"photoSmallPic_table"==s&&(c=0,f=0,l=0,_=e(o).width(),p=e(o).height(),e(a).css("z-index",1),e(a).css("left",c+l).css("top",f),e(a).css("width",_-2*T+"px"),e(a).css("height",p-2*T+"px")),"photo-container"!=s&&"product-container"!=s||(5!=n?(8==m&&2==n?e(a).css("left",0).css("top",O-d):2==g&&89==E||0==g&&30==E?e(a).css("top",f):e(a).css("left",c+l).css("top",f),2!=n&&3!=n&&5!=n||2!=g||e(a).css("left",0)):l>0&&e(a).css("left",c+l))},t.FUNC.TOOL.parsePixelToInt=function(e){return void 0===e||"auto"==e?0:parseInt(e.replace("px"))},t.FUNC.TOOL.colorRgb=function(e){var t="#",i=[];if((e=e.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var o=1;o<4;o+=1)t+=e.slice(o,o+1).concat(e.slice(o,o+1));e=t}for(var a=1;a<7;a+=2)i.push(parseInt("0x"+e.slice(a,a+2)));return i.join(",")}return e}}(jQuery,Site.ImageEffect),function(e,t){function o(e,t){return i(i(i(i(i({},e,t),"-ms-"+e,t),"-moz-"+e,t),"-webkit-"+e,t),"-o-"+e,t)}t.FUNC.BUS.bindImgEffCusEvent=function(e,i){"function"==typeof t.ITF[i.targetParent]&&t.ITF[i.targetParent](e,i)},t.FUNC.BUS.ImgEffAnimate=function(i,a,n,s,r){var f={hover:{},leave:{}};e(a).attr("fk_fixed")||function(t,i){var o=i.effType;if(4==o){var a=e(t).find(".props .propList"),n=e(a).height(),s=(e(t).height()-n)/2-10;e(a).css("padding-top",s+"px")}if(5==o){a=e(t).find(".props .propList");var r=e(t).find(".props .propBuy"),f=e(a).height(),c=a.length>0?parseInt(e(a).css("padding-top")):5,_=a.length>0?parseInt(e(a).css("margin-bottom")):10,p=e(t).parent().find("img").position().left,l=e(t).parent().find("img").css("margin-left");if(f+=c+_,e(r).length>0){var T=parseInt(e(r).css("margin-top"));f+=e(r).height()+T+8}e(t).css({height:f+"px",bottom:"-"+f+"px",left:p+l+"px"})}e(t).attr("fk_fixed",1)}(a,n),function(i,a,n,s,r){var f,c,_=n.effType,p=1,l=n.imgShapeType||1;e(a).parent().hasClass("cardDiv")&&(c=e(a).parent());if(Fai.isIE6()||Fai.isIE7()||Fai.isIE8()){if(p=n.backgroundType?n.fullmaskBackgroundOpacity:80,n[t.DATA.KEY.FULL_MASK_CUS_BG]){var T=n[t.DATA.KEY.FULL_MASK_BG_STYLE];if("string"==typeof T&&T.length>0){var m=e.parseJSON(T);p="number"==typeof m.o?m.o:80}}p/=100}switch(_){case 2:var g,O,d,E;i.hover.opacity=1,i.leave.opacity=0,2!=l&&4!=l||(O=parseInt(e(a).css("borderWidth")),g=e(r).find(".floatImgWrap").width()-2*O,d=e(r).find(".floatImgWrap img").height(),E=e(r).find(".floatImgWrap img").width(),e(a).css({height:g+"px",width:g+"px",top:"0",left:"0"}),d>E?e(a).css({marginTop:(d-E)/2+"px"}):e(a).css({marginLeft:(E-d)/2+"px"}),4==l&&e(a).css({borderRadius:"50%"}));break;case 3:i.hover.opacity=1,i.leave.opacity=0;break;case 4:i.hover.opacity=p,i.leave.opacity=0;break;case 5:var A;e(a).css("opacity",1),i.hover.bottom=0,a.length>0&&(f=a[0].getBoundingClientRect().height),f=void 0===f?e(a).height():Math.round(f),i.leave.bottom="-"+f+"px",c&&c.length>0&&(A=parseFloat(c.css("margin-top").replace("px",""))||0,i.hover.bottom=-A,i.leave.bottom=-A-e(a).height()+"px");break;case 6:i.hover=o("transform","scale(1.1)"),i.leave=o("transform","");break;case 7:e(a).attr("animation-ml")||e(a).attr("animation-ml",e(a).css("margin-left"));var h=parseInt(e(a).attr("animation-ml"))-10;i.hover["margin-left"]=h?h+"px":"-10px",i.leave["margin-left"]=e(a).attr("animation-ml")||"0px"}}(f,a,n,0,s),Fai.isIE()?"mouseenter"==i?e(a).stop().animate(f.hover,250):"mouseleave"==i&&e(a).stop().animate(f.leave,250):"mouseenter"==i?e(a).css(f.hover):"mouseleave"==i&&e(a).css(f.leave)}}(jQuery,Site.ImageEffect),function(e,i,o){i.FUNC.BASIC.Init=function(t){if(!Fai.top.limit_pic_effect){var a={};if(a[i.DATA.KEY.OPT_MODULE_ID]=0,a[i.DATA.KEY.OPT_IMG_EFF_OPTION]={},a[i.DATA.KEY.OPT_TG_OPTION]={},a[i.DATA.KEY.OPT_CALLBACK]=o,a[i.DATA.KEY.OPT_CALLBACK_ARGS]=o,function(t,o){if(0==t.length)return!1;if(0==t[i.DATA.KEY.OPT_MODULE_ID])return!1;return e.extend(o,t),!0}(t,a)){var n=e("#module"+a[i.DATA.KEY.OPT_MODULE_ID]),s=a[i.DATA.KEY.OPT_IMG_EFF_OPTION].effType;1!=s&&n.length&&n.one("mousemove.imageEffects1",(function(o){a[i.DATA.KEY.OPT_TG_OPTION].moduleStyle||(a[i.DATA.KEY.OPT_TG_OPTION].moduleStyle=n.attr("_modulestyle"));var r=Site.getElemId(n);0!=jzModule.Module.getPerformAttr(r,"_inTab")&&(i.cashOptions=i.cashOptions||{},i.cashOptions[t.moduleId]=t);var f=e(n).find(".imageEffects"),c=e(n).find("."+a[i.DATA.KEY.OPT_TG_OPTION].target);e(f).length>0&&e(f).remove();e.each(c,(function(e,t){s>1&&s<6?(i.FUNC.BASIC.CreateGE(t,a),i.FUNC.BUS.bindImgEffCusEvent(t,a[i.DATA.KEY.OPT_TG_OPTION]),4!=s&&5!=s||Fai.isNull(a[i.DATA.KEY.OPT_CALLBACK])||a[i.DATA.KEY.OPT_CALLBACK](t,a[i.DATA.KEY.OPT_IMG_EFF_OPTION],a[i.DATA.KEY.OPT_TG_OPTION],a[i.DATA.KEY.OPT_CALLBACK_ARGS])):s<=7&&i.FUNC.BASIC.CreateSP(t,a)})),8==s?Site.hoverChangeImage(e(n)):e(c).off("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs").on("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs",(function(t){var o,n=e(this).find(".imageEffects");s<6?i.FUNC.TOOL.resetImgEff(a[i.DATA.KEY.OPT_TG_OPTION],this,n,s):s<=8&&0==(n=e(this).find("img")).length&&(n=e(this).find(".J_fonticon")),o="mouseenter"==t.type?"mouseenter":"mouseleave",s>1&&s<=7&&i.FUNC.BUS.ImgEffAnimate(o,n,a[i.DATA.KEY.OPT_IMG_EFF_OPTION],this,a[i.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0)}));t.fixCallBack&&t.fixCallBack(),o&&o.target&&e(o.target).mouseenter()}))}}},i.FUNC.BASIC.CreateGE=function(o,a){!function(t,o){var a,n=!Fai.isNull(e(t).find("a"))&&0!=e(t).find("a").length,s=27==o.tagetOption.moduleStyle;n&&!s?e(t).find("a").after(i.DATA.imageEffectHtml):(0==(a=e(t).find("img")).length&&(a=e(t).find(".J_fonticon")),a.after(i.DATA.imageEffectHtml))}(o,a),function(o,a){0==e(o).find(".J_photoImgPanel").length&&(e(o).hasClass("floatImg_J_special")?e(o).css("position","relative"):e(o).css({position:"relative",overflow:"hidden"}));var n,s=a[i.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;n=a[i.DATA.KEY.OPT_TG_OPTION].picScale?a[i.DATA.KEY.OPT_TG_OPTION].picScale||0:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].ns||0;var r,f,c,_,p,l,T,m,g,O,d,E,A,h,u,I,b=a[i.DATA.KEY.OPT_IMG_EFF_OPTION].effType,P=e(o).find(".imageEffects"),F=2==b?"imageEffects_Border":3==b?"imageEffects_Magnifier":4==b?"imageEffects_FullMaks":5==b?"imageEffects_HalfMaks":"",S={bw:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderWidth:1,bs:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderStyle:1,bc:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderType?a[i.DATA.KEY.OPT_IMG_EFF_OPTION].borderColor:8==s?"#808080":"#000"},y=1==S.bs?"solid":2==S.bs?"dotted":3==S.bs?"dashed":"",C=a[i.DATA.KEY.OPT_IMG_EFF_OPTION][i.DATA.KEY.FULL_MASK_BG_STYLE],v=a[i.DATA.KEY.OPT_IMG_EFF_OPTION][i.DATA.KEY.HALF_MASK_BG_STYLE],D={fbc:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundColor,fbo:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundOpacity},L={hbc:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundColor,hbo:a[i.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundOpacity},K={color:"#555555",opacity:80},M={color:"#000",opacity:85};"photoCard"==a.moduleType||"photoNewCard"==a.moduleType||"photoMoreCard"==a.moduleType?(r=e(o).parent(),f=e(r).width(),c=e(r).height(),_=e(r).css("margin-left"),p=(I=e(r).position()).top,l=I.left,d=parseFloat(e(o).css("margin-top").replace("px","")),E=parseFloat(e(o).css("margin-left").replace("px",""))):(T=e(o).position().top,m=e(o).height(),g=e(o).width(),O=e(o).parent().css("padding-top"),0==(r=e(o).find("img")).length&&(r=e(o).find(".J_fonticon")),f=e(r).width(),c=e(r).height(),_=e(r).css("margin-left"),p=(I=e(r).position()).top,l=I.left,h=e(o).width(),u=e(o).height());var N=a[i.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundType;"object"==t(D)&&N&&(K.color=0!=D.fbc.length?D.fbc:K.color,K.opacity="number"==typeof D.fbo?D.fbo:K.opacity);var Y=a[i.DATA.KEY.OPT_IMG_EFF_OPTION][i.DATA.KEY.FULL_MASK_CUS_BG];"string"==typeof C&&0!=C.length&&Y&&(C=e.parseJSON(C),K.color=0!=C.c.length?C.c:K.color,K.opacity="number"==typeof C.o?C.o:K.opacity,98===a[i.DATA.KEY.OPT_IMG_EFF_OPTION].style&&(M.color=K.color,M.opacity=K.opacity));var G=a[i.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundHalfType;"object"==t(L)&&G&&(M.color=0!=L.hbc.length?L.hbc:M.color,M.opacity="number"==typeof L.hbo?L.hbo:M.opacity);var U=a[i.DATA.KEY.OPT_IMG_EFF_OPTION][i.DATA.KEY.HALF_MASK_CUS_BG];"string"==typeof v&&0!=v.length&&U&&(v=e.parseJSON(v),M.color=0!=v.c.length?v.c:M.color,M.opacity="number"==typeof v.o?v.o:M.opacity);_=i.FUNC.TOOL.parsePixelToInt(_),O=i.FUNC.TOOL.parsePixelToInt(O);var w,x={};switch(b){case 1:case 3:case 6:case 7:Object.assign(x,{top:p});break;case 2:8==s?(g-=2*S.bw,m-=2*S.bw,f=g+2*(A=e(o).css("padding").replace("px","")),c=m+2*A,Object.assign(x,{top:T-O})):(f-=2*S.bw,c-=2*S.bw,Object.assign(x,{top:p,left:l+_})),Object.assign(x,{"border-width":S.bw+"px","border-style":y}),e(P)[0].style["border-image-slice"]=S.bw,Object.assign(x,Site.CompatibleColor.borderStyle(S.bc));break;case 4:w=K.color,Site.colorUtils.attachCompatibleStyleToDom(P[0]||P,w),Object.assign(x,{top:p});break;case 5:(U||G)&&(w=M.color),98===a[i.DATA.KEY.OPT_IMG_EFF_OPTION].style&&Y&&(w=K.color),Site.colorUtils.attachCompatibleStyleToDom(P[0]||P,w),e(P).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half"),Object.assign(x,{bottom:"-"+c+"px"})}"photoCard"==a.moduleType||"photoNewCard"==a.moduleType||"photoMoreCard"==a.moduleType?5!=b?(Object.assign(x,{top:-d}),Object.assign(x,{left:-E})):Object.assign(x,{"padding-left":-E}):2==b&&8==s?Object.assign(x,{left:0}):4!=b||2!=a.imgEffOption.style&&3!=a.imgEffOption.style&&30!=a.imgEffOption.style?Object.assign(x,{left:l+_}):Object.assign(x,{left:0});2!=n||2!=b&&3!=b&&5!=b?4!=b||2!=a.imgEffOption.style&&3!=a.imgEffOption.style&&30!=a.imgEffOption.style?(Object.assign(x,{width:f}),Object.assign(x,{height:c})):(Object.assign(x,{width:g}),Object.assign(x,{height:m})):(5==b?Object.assign(x,{width:h,height:u}):2==b?Object.assign(x,{width:h-2*S.bw,height:u-2*S.bw}):Object.assign(x,{width:h-2,height:u-2}),Object.assign(x,{left:0}));e(P).css(x).addClass(F)}(o,a)},i.FUNC.BASIC.CreateSP=function(t,o){!function(t,o){var a,n,s=e(t).find("img"),r=o[i.DATA.KEY.OPT_IMG_EFF_OPTION];0==s.length&&(s=e(t).find(".J_fonticon"));var f=o[i.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(6==r.effType){var c=e(s).width(),_=e(s).height();if(r.forRefreshPic&&(s.data("realWidth")&&(c=s.data("realWidth")),s.data("realHeight")&&(_=s.data("realHeight"))),0==c||0==_)return;e(s).attr("_initWidth",c).attr("_initHeight",_),n=e(s).parent(),r.spScaleUp?n.hasClass("J_spScaleUp")||(a='<div class="J_spScaleUp" style="position:relative; overflow:hidden; margin:0px auto;"></div>',n.append(a),n.find(".J_spScaleUp").append(e(s)).css({width:c,height:_})):n.hasClass("J_spScaleUp")&&(n.parent().append(e(s)),n.remove())}if(7==r.effType){var p=e(s).width();if(0==p)return;8==f||1==f?e(s).css("width",p+"px"):e(s).css("width",p+10+"px")}}(t,o),function(t,o){var a=6==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].effType?"imageEffectsAnimate_Magnify":"imageEffectsAnimate_MoveLeft",n=88==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].style||89==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].style||90==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].style,s=6==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].effType||7==o[i.DATA.KEY.OPT_IMG_EFF_OPTION].effType,r=e(t).find("img");0==r.length&&(r=e(t).find(".J_fonticon"));s&&n||e(t).css({overflow:"hidden"});6==o.imgEffOption.effType||7==o.imgEffOption.effType?r.addClass(a).css("margin",r.css("margin")):r.addClass(a).css("margin","0px")}(t,o)}}(jQuery,Site.ImageEffect),{}}()}));